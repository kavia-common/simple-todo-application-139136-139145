# Supabase Integration (Frontend - React)

This app uses Supabase REST API (no SDK) to store todos in a `todos` table.

## Environment Variables

Add these to `.env` in the `todo_frontend` root (prefix is required by CRA):

- REACT_APP_SUPABASE_URL=<your-supabase-url> (e.g., https://xyzcompany.supabase.co)
- REACT_APP_SUPABASE_KEY=<your-anon-public-key>

These are read at runtime by the frontend to call Supabase REST endpoints.

Current container env status:
- Detected variables present in container: REACT_APP_SUPABASE_URL, REACT_APP_SUPABASE_KEY
- Ensure they are filled with your projectâ€™s URL and anon key before running the app.

## Database Schema (configured)

The following table is installed in your Supabase project:

- id: bigint generated by default as identity primary key
- title: text not null
- completed: boolean not null default false
- created_at: timestamp with time zone not null default now()

Installed SQL:

```sql
create table if not exists public.todos (
  id bigint generated by default as identity primary key,
  title text not null,
  completed boolean not null default false,
  created_at timestamp with time zone not null default now()
);
```

## Row Level Security (RLS) Policies (configured for development)

RLS is enabled and permissive policies for anon role are installed to allow unauthenticated CRUD via REST (development/demo use only):

```sql
alter table if exists public.todos enable row level security;

-- Policies created idempotently via DO blocks:
-- "allow read"  (select to anon using true)
-- "allow insert" (insert to anon with check true)
-- "allow update" (update to anon using true)
-- "allow delete" (delete to anon using true)
```

For production, replace these with user-scoped policies and use Supabase Auth.

## Verify REST Access

- GET:  {SUPABASE_URL}/rest/v1/todos?select=*&order=created_at.asc
- POST: {SUPABASE_URL}/rest/v1/todos
- PATCH:{SUPABASE_URL}/rest/v1/todos?id=eq.{id}
- DELETE:{SUPABASE_URL}/rest/v1/todos?id=eq.{id}

Headers:
- apikey: {REACT_APP_SUPABASE_KEY}
- Authorization: Bearer {REACT_APP_SUPABASE_KEY}
- Content-Type: application/json
- Prefer: return=representation

## Notes

- This app does not use the Supabase JS SDK to keep dependencies minimal.
- If you change table/column names, update `src/supabaseClient.js`.
- Ensure `.env` is populated before running `npm start` so requests succeed.
- Security: The anon key has broad access due to permissive RLS. Use only for local dev/demo.
