# Supabase Integration (Frontend - React)

This app uses Supabase REST API (no SDK) to store todos in a `todos` table.

## Environment Variables

Add these to `.env` in the `todo_frontend` root (prefix is required by CRA):

- REACT_APP_SUPABASE_URL=<your-supabase-url> (e.g., https://xyzcompany.supabase.co)
- REACT_APP_SUPABASE_KEY=<your-anon-public-key>

These are read at runtime by the frontend to call Supabase REST endpoints.

## Database Schema (expected)

Create a `todos` table:

- id: bigint or uuid (primary key, default: auto)
- title: text (not null)
- completed: boolean (default false)
- created_at: timestamp with time zone (default now())

Example SQL:

```sql
create table if not exists public.todos (
  id bigint generated by default as identity primary key,
  title text not null,
  completed boolean not null default false,
  created_at timestamp with time zone not null default now()
);
```

## Row Level Security (RLS)

For development and public demo, you can enable RLS and add a permissive policy (or disable RLS):

```sql
alter table public.todos enable row level security;

create policy "allow read" on public.todos
for select
to anon
using (true);

create policy "allow insert" on public.todos
for insert
to anon
with check (true);

create policy "allow update" on public.todos
for update
to anon
using (true);

create policy "allow delete" on public.todos
for delete
to anon
using (true);
```

For production, restrict by user and use Supabase Auth.

## REST Endpoints Used

- GET:  {SUPABASE_URL}/rest/v1/todos?select=*&order=created_at.asc
- POST: {SUPABASE_URL}/rest/v1/todos
- PATCH:{SUPABASE_URL}/rest/v1/todos?id=eq.{id}
- DELETE:{SUPABASE_URL}/rest/v1/todos?id=eq.{id}

Headers:
- apikey: {REACT_APP_SUPABASE_KEY}
- Authorization: Bearer {REACT_APP_SUPABASE_KEY}
- Content-Type: application/json
- Prefer: return=representation

## Notes

- This app does not use the Supabase JS SDK to keep dependencies minimal.
- If you change table/column names, update `src/supabaseClient.js`.
- Ensure `.env` is populated before running `npm start` so requests succeed.
